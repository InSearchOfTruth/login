{"ast":null,"code":"'use strict';\n\nvar fetch = global.fetch || require('node-fetch');\n\nvar parse = require('@xmpp/xml/lib/parse');\n\nvar compareAltConnections = require('./alt-connections').compare;\n\nfunction resolve(domain) {\n  return fetch(\"https://\".concat(domain, \"/.well-known/host-meta\")).then(function (res) {\n    return res.text();\n  }).then(function (res) {\n    return parse(res).getChildren('Link').filter(function (link) {\n      return ['urn:xmpp:alt-connections:websocket', 'urn:xmpp:alt-connections:httppoll', 'urn:xmpp:alt-connections:xbosh'].indexOf(link.attrs.rel) > -1;\n    }).map(function (_ref) {\n      var attrs = _ref.attrs;\n      return {\n        rel: attrs.rel,\n        href: attrs.href,\n        method: attrs.rel.split(':').pop(),\n        uri: attrs.href\n      };\n    }).sort(compareAltConnections);\n  }).catch(function () {\n    return [];\n  });\n}\n\nmodule.exports.resolve = resolve;","map":null,"metadata":{},"sourceType":"script"}