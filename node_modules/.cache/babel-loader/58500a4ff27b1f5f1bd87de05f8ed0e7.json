{"ast":null,"code":"'use strict';\n\nvar _defineProperty = require(\"D:\\\\practics\\\\ConnectyCube\\\\test\\\\node_modules\\\\@babel\\\\runtime/helpers/defineProperty\");\n\nvar _slicedToArray = require(\"D:\\\\practics\\\\ConnectyCube\\\\test\\\\node_modules\\\\@babel\\\\runtime/helpers/slicedToArray\");\n\nvar _objectWithoutProperties = require(\"D:\\\\practics\\\\ConnectyCube\\\\test\\\\node_modules\\\\@babel\\\\runtime/helpers/objectWithoutProperties\");\n\nvar _require = require('@xmpp/client-core'),\n    xml = _require.xml,\n    jid = _require.jid,\n    Client = _require.Client;\n\nvar getDomain = require('./lib/getDomain');\n\nvar _reconnect = require('@xmpp/reconnect');\n\nvar _websocket = require('@xmpp/websocket');\n\nvar _middleware = require('@xmpp/middleware');\n\nvar _streamFeatures = require('@xmpp/stream-features');\n\nvar _iqCaller = require('@xmpp/iq/caller');\n\nvar _iqCallee = require('@xmpp/iq/callee');\n\nvar _resolve = require('@xmpp/resolve'); // Stream features - order matters and define priority\n\n\nvar _sasl = require('@xmpp/sasl');\n\nvar _resourceBinding = require('@xmpp/resource-binding');\n\nvar _sessionEstablishment = require('@xmpp/session-establishment'); // SASL mechanisms - order matters and define priority\n\n\nvar anonymous = require('@xmpp/sasl-anonymous');\n\nvar plain = require('@xmpp/sasl-plain');\n\nfunction client() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var resource = options.resource,\n      credentials = options.credentials,\n      username = options.username,\n      password = options.password,\n      params = _objectWithoutProperties(options, [\"resource\", \"credentials\", \"username\", \"password\"]);\n\n  var domain = params.domain,\n      service = params.service;\n\n  if (!domain && service) {\n    params.domain = getDomain(service);\n  }\n\n  var entity = new Client(params);\n\n  var reconnect = _reconnect({\n    entity: entity\n  });\n\n  var websocket = _websocket({\n    entity: entity\n  });\n\n  var middleware = _middleware({\n    entity: entity\n  });\n\n  var streamFeatures = _streamFeatures({\n    middleware: middleware\n  });\n\n  var iqCaller = _iqCaller({\n    middleware: middleware,\n    entity: entity\n  });\n\n  var iqCallee = _iqCallee({\n    middleware: middleware,\n    entity: entity\n  });\n\n  var resolve = _resolve({\n    entity: entity\n  }); // Stream features - order matters and define priority\n\n\n  var sasl = _sasl({\n    streamFeatures: streamFeatures\n  }, credentials || {\n    username: username,\n    password: password\n  });\n\n  var resourceBinding = _resourceBinding({\n    iqCaller: iqCaller,\n    streamFeatures: streamFeatures\n  }, resource);\n\n  var sessionEstablishment = _sessionEstablishment({\n    iqCaller: iqCaller,\n    streamFeatures: streamFeatures\n  }); // SASL mechanisms - order matters and define priority\n\n\n  var mechanisms = Object.entries({\n    anonymous: anonymous,\n    plain: plain\n  }).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        k = _ref2[0],\n        v = _ref2[1];\n\n    return _defineProperty({}, k, v(sasl));\n  });\n  return Object.assign(entity, {\n    entity: entity,\n    reconnect: reconnect,\n    websocket: websocket,\n    middleware: middleware,\n    streamFeatures: streamFeatures,\n    iqCaller: iqCaller,\n    iqCallee: iqCallee,\n    resolve: resolve,\n    sasl: sasl,\n    resourceBinding: resourceBinding,\n    sessionEstablishment: sessionEstablishment,\n    mechanisms: mechanisms\n  });\n}\n\nmodule.exports.xml = xml;\nmodule.exports.jid = jid;\nmodule.exports.client = client;","map":null,"metadata":{},"sourceType":"script"}