{"ast":null,"code":"var config = require('./cubeConfig'),\n    chatPRTCL = config.chatProtocol,\n    Utils = require('./cubeInternalUtils');\n\nfunction Connection() {\n  var protocol = chatPRTCL.active === 1 ? chatPRTCL.bosh : chatPRTCL.websocket,\n      conn = new Strophe.Connection(protocol);\n\n  if (chatPRTCL.active === 1) {\n    conn.xmlInput = function (data) {\n      if (data.childNodes[0]) {\n        for (var i = 0, len = data.childNodes.length; i < len; i++) {\n          Utils.DLog('[Chat]', 'RECV:', data.childNodes[i]);\n        }\n      }\n    };\n\n    conn.xmlOutput = function (data) {\n      if (data.childNodes[0]) {\n        for (var i = 0, len = data.childNodes.length; i < len; i++) {\n          Utils.DLog('[Chat]', 'SENT:', data.childNodes[i]);\n        }\n      }\n    };\n  } else {\n    conn.xmlInput = function (data) {\n      Utils.DLog('[Chat]', 'RECV:', data);\n    };\n\n    conn.xmlOutput = function (data) {\n      Utils.DLog('[Chat]', 'SENT:', data);\n    };\n  }\n\n  return conn;\n}\n\nmodule.exports = Connection;","map":null,"metadata":{},"sourceType":"script"}